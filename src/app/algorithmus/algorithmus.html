<h1 class="title">Algorithmus</h1>

<form [formGroup]="algorithmusForm" (ngSubmit)="onSubmit()">
  <div>
    <label for="summe">Summe (€):</label>
    <input
      id="summe"
      type="number"
      formControlName="Summe"
      placeholder="z. B. 1000"
    />

    @if (Summe?.touched && Summe?.invalid) {
      <div class="error">
        @if (Summe?.errors?.['required']) {
          <small>Summe ist erforderlich.</small>
        }
        @if (Summe?.errors?.['min']) {
          <small>Mindestwert ist 1 €.</small>
        }
        @if (Summe?.errors?.['pattern']) {
          <small>Bitte gültige Zahl eingeben (z. B. 1000.50).</small>
        }
      </div>
    }
  </div>

  <div class="checkboxes">
    <label for="basic-fee">
      <input id="basic-fee" type="checkbox" formControlName="basicFee" />
      Grundgebühr
    </label>
    <label for="first-step">
      <input id="first-step" type="checkbox" formControlName="firstStep" />
      Individuelle Express Krypto-Einführung
    </label>

    <label for="exchange-setup" >
      <input id="exchange-setup" type="checkbox" formControlName="exchangeSetup" />
      Börsenwahl & Einrichtung
    </label>

    <label for="buy-strategy">
      <input id="buy-strategy" type="checkbox" formControlName="buyStrategy" />
      Kaufstrategie & Coin-Auswahl
    </label>

    <label for="wallet-setup">
      <input id="wallet-setup" type="checkbox" formControlName="walletSetup" />
      Wallet-Einrichtung & Sicherheit
    </label>

    <label for="tax-tool">
      <input id="tax-tool" type="checkbox" formControlName="taxTool" />
      Steuertool für deine Abwicklung
    </label>

    <label for="ongoing-support">
      <input id="ongoing-support" type="checkbox" formControlName="ongoingSupport" />
      Laufende Betreuung
    </label>
  </div>

  <button type="submit" [disabled]="!algorithmusForm.valid">
    Berechnen
  </button>
</form>

<section>
  <h2>
    Zusammenfassung
  </h2>
  <table>
    <thead>
      <tr>
        <td>
          Leistung
        </td>
        <td>
          Gebühr
        </td>
      </tr>
    </thead>
        <div class="divider"></div>
    <tbody>
    <tr>
        <td class="first-part">Grundgebühr</td>
        <td class="first-part">{{basicFeeProvision | number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td>Individuelle Express Krypto-Einführung</td>
      <td>{{firstStepAmount | number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td>Börsenwahl & Einrichtung</td>
      <td>{{exchangeSetupAmount| number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td> Kaufstrategie & Coin-Auswahl</td>
      <td>{{buyStrategyAmount | number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td>Wallet-Einrichtung & Sicherheit</td>
      <td>{{walletSetupAmount | number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td>Steuertool für deine Abwicklung</td>
      <td>{{taxToolAmount | number:'1.2-2'}} €</td>
    </tr>
    <tr>
      <td>Laufende Betreuung</td>
      <td>{{ongoingSupportAmount | number:'1.2-2'}} €</td> 
    </tr>
    
    <div class="divider"></div>

      <tr>
      <td>Investitions Betrag</td>
      <td>{{ investmentAmount | number:'1.2-2' }} €</td>
      </tr>

      <tr>
        <td>Provison</td>
        <td>{{ totalProvision | number:'1.2-2' }} €</td>
      </tr>
        
    <div class="divider"></div>

    <tr>
      <td>Total Betrag</td>
      <td>{{ totalAmount | number:'1.2-2'}} €</td>
    </tr>
  </tbody>
  </table>
</section>

