<h1 class="title">Kunden</h1>

<search></search>

<section>
    <table class="">
        <thead class="">
            <tr>
                <td class="">Kundennr</td>
                <td class="">Anrede</td>
                <td class="">Vorname</td>
                <td class="">Nachname</td>
                <td class="">Straße</td>
                <td class="">Nr</td>
                <td class="">PLZ</td>
                <td class="">Stadt</td>
                <td class="">E-Mail</td>
                <td class="">Handy</td>
                <td class="">Portfolio</td>
                <td class="">Abo</td>
                <td class="">Rechnungen</td>
                <td class="">Edit</td>
            </tr>
        </thead>
        <tbody class="">
             @for (customer of customers(); track customer.id) {
            <tr class="table">
                <td>{{ customer.customer_number }}</td>
                <td>{{ customer.title }}</td>
                <td>{{ customer.first_name }}</td>
                <td>{{ customer.last_name }}</td>
                <td>{{ customer.street }}</td>
                <td>{{ customer.number }}</td>
                <td>{{ customer.postcode }}</td>
                <td>{{ customer.city }}</td>
                <td>{{ customer.email }}</td>
                <td>{{ customer.phone }}</td>
                <td>{{ customer.has_portfolio }}</td>
                <td>{{ customer.has_subscription }}</td>
                <td>{{ customer.invoices }}</td>
                <td class="crmSK-td-edit">
                    <button class="crmSK-icon-three-dots" (click)="toggleMenu(customer.id)">
                        <img src="/assets/three.svg" alt="edit">
                    </button>

                    <ul role="menu" class="crmSK-popper" [class.show]="openMenuId === customer.id">
                        <li class="crmSK-popper-li" [routerLink]="['/crm/kunden', customer.id]">
                            Ansehen
                        </li>
                        <li class="crmSK-popper-li">
                            Löschen
                        </li>
                        <li class="crmSK-popper-li" [routerLink]="['crm//kunden', customer.id, 'comments']">
                            Kommentar hin. 
                        </li>
                    </ul>

                </td>
            </tr>
            }

        </tbody>
    </table>
    <router-outlet></router-outlet>
    <a href="/neu-kunde" class="new-customer">Neuer Kunde Anlegen</a>
</section>